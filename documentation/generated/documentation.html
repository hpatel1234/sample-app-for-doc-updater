<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Logic Documentation</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
  <body>
    <!-- 1) Call Graph as JSON -->
    <section id="call-graph">
      <h1>Call Graph</h1>
      <pre>{
  "DerivativeTradeModel": {
    "transform": [
      "enrichEmployees",
      "enrichExtraAttributes",
      "enrichParticipants"
    ],
    "enrichEmployees": [
      "execute"
    ],
    "enrichExtraAttributes": [
      "enrichAssetClass",
      "getAssetMappings"
    ]
  }
}</pre>
    </section>

    <!-- 2) Final Transformations Table -->
    <section id="final-transformations">
      <h1>Final Transformations</h1>
      <table id="final-transformations-table">
          <tr>
            <th>Output Attribute</th>
            <th>Input Attributes Used</th>
            <th>Transformation Logic</th>
            <th>Static Mappings Used</th>
            <th>Extra Information</th>
          </tr>
          <tr>
            <td class="output-attribute">assetClass</td>
            <td class="inputs-used">["RptL3Descr", "RptL4Descr", "RptL5Descr"]</td>
            <td class="transformation-logic">Check if RptL5Descr is not blank, then use it to get the asset class from mappings. If blank, check RptL4Descr, then RptL3Descr. If all are blank, default to "TREASURE".</td>
            <td class="static-mappings">{"mss": "Markets Security", "rc": "Risk and compliance"}</td>
            <td class="extra-info">N/A</td>
          </tr>
          <tr>
            <td class="output-attribute">lob</td>
            <td class="inputs-used">["LineOfBusiness"]</td>
            <td class="transformation-logic">Set the line of business from the first employee in the list.</td>
            <td class="static-mappings">{}</td>
            <td class="extra-info">N/A</td>
          </tr>
          <tr>
            <td class="output-attribute">orgUnit</td>
            <td class="inputs-used">["Country"]</td>
            <td class="transformation-logic">Set the country from the first employee in the list.</td>
            <td class="static-mappings">{}</td>
            <td class="extra-info">N/A</td>
          </tr>
          <tr>
            <td class="output-attribute">participants</td>
            <td class="inputs-used">["FirstName", "LastName"]</td>
            <td class="transformation-logic">Concatenate the first name and last name of each employee to form a list of participants.</td>
            <td class="static-mappings">{}</td>
            <td class="extra-info">N/A</td>
          </tr>
      </table>
    </section>

    <!-- 3) Intermediate Transformations Table -->
    <section id="intermediate-transformations">
      <h1>Intermediate Transformations</h1>
      <table id="intermediate-transformations-table">
          <tr>
            <th>Intermediate Output</th>
            <th>Input Attributes Used</th>
            <th>Intermediate Transformation Logic</th>
            <th>Final Output Attribute Used In</th>
          </tr>
          <tr>
            <td class="intermediate-output">employees</td>
            <td class="inputs-used">["Employees"]</td>
            <td class="intermediate-logic">For each employee ID in the input, fetch the employee details using a filter. If an employee is not found, throw an exception.</td>
            <td class="used-in">["lob", "orgUnit", "assetClass", "participants"]</td>
          </tr>
      </table>
    </section>
  </body>
</html>