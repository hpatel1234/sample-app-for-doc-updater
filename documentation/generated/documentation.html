<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Logic Documentation</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>

<h1>Transformation Logic Documentation</h1>

<h2>Final Output Attributes</h2>
<table>
    <tr>
        <th>Output Attribute</th>
        <th>Input Attributes Used</th>
        <th>Transformation Logic</th>
        <th>Static Mappings Used</th>
        <th>Extra Information</th>
    </tr>
    <tr>
        <td>Participants</td>
        <td>Employee First Name, Employee Last Name</td>
        <td>Concatenate first name and last name of each employee to form a list of participant names.</td>
        <td>{}</td>
        <td>The participants list is only populated if the employees list is not empty.</td>
    </tr>
    <tr>
        <td>LOB</td>
        <td>Employee Line Of Business</td>
        <td>Set the LOB attribute from the line of business of the first employee in the list.</td>
        <td>{}</td>
        <td>The LOB attribute is only set if the employees list is not empty.</td>
    </tr>
    <tr>
        <td>OrgUnit</td>
        <td>Employee Country</td>
        <td>Set the OrgUnit attribute from the country of the first employee in the list.</td>
        <td>{}</td>
        <td>The OrgUnit attribute is only set if the employees list is not empty.</td>
    </tr>
    <tr>
        <td>AssetClass</td>
        <td>Employee RptL3Descr, Employee RptL4Descr, Employee RptL5Descr</td>
        <td>Determine the asset class based on the RptL5Descr, RptL4Descr, and RptL3Descr of the first employee in a hierarchical manner. If RptL5Descr is not blank, use it to get the asset class from the mappings. If RptL5Descr is blank, check RptL4Descr, and so on. If all are blank, default to "TREASURE".</td>
        <td>{"mss": "Markets Security", "rc": "Risk and compliance"}</td>
        <td>The AssetClass attribute is only set if the employees list is not empty.</td>
    </tr>
</table>

<h2>Intermediate Transformations</h2>
<table>
    <tr>
        <th>Intermediate Output</th>
        <th>Input Attributes Used</th>
        <th>Intermediate Transformation Logic</th>
        <th>Used in Final Output Attribute</th>
    </tr>
    <tr>
        <td>Employees</td>
        <td>Employee IDs from DTO</td>
        <td>For each employee ID in the DTO, fetch the employee details using a filter. If an employee is not found, throw an exception.</td>
        <td>Participants, LOB, OrgUnit, AssetClass</td>
    </tr>
</table>

</body>
</html>
